/* =========================================
   Base / Reset
========================================= */
:root{
  --bg:#f7f7fb;
  --card:#ffffff;
  --ink:#0f172a;
  --muted:#65708a;
  --accent:#0ea5e9;
  --accent-ink:#075985;
  --ok:#10b981;
  --warn:#f59e0b;
  --border:#e6e8ef;
  --bar:#eef2f7;
  --bar-fill:#0ea5e9;
  --chip:#f1f5f9;
  --shadow: 0 6px 20px rgba(15, 23, 42, 0.08);
}

*{ box-sizing:border-box; }
html,body{ margin:0; padding:0; height:100%; }
body{
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color:var(--ink);
  background:var(--bg);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* Containers */
.container{ max-width:820px; margin:0 auto; padding:16px; }
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow:var(--shadow);
}

/* Tabs */
.tabs{ display:flex; gap:8px; margin:12px 0 16px; }
.tab{
  flex:1 1 0; text-align:center; padding:12px 10px;
  border:1px solid var(--border); border-radius:12px;
  background:#fff; color:var(--ink); font-weight:600;
}
.tab.active{ border-color:var(--accent); color:var(--accent-ink); background:#eef7fe; }

/* Headline / Pills */
.section-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 0; }
#dayName{ font-size:20px; font-weight:800; }
.nav-inline{ display:flex; gap:8px; }
.nav-inline button{
  padding:8px 10px; border-radius:10px; border:1px solid var(--border); background:#fff; font-weight:600;
}
.pills{ display:flex; flex-wrap:wrap; gap:8px; }
.pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 12px; background:var(--chip); border-radius:999px; font-size:14px;
}
.pill strong{ font-variant-numeric:tabular-nums; }

/* Progress bars */
#bars{ display:flex; flex-direction:column; gap:10px; margin:10px 0 6px; }
.bar-row{ display:flex; flex-direction:column; gap:6px; }
.bar-label{ display:flex; align-items:baseline; justify-content:space-between; font-size:14px; color:var(--muted); }
.bar-value{ font-variant-numeric:tabular-nums; color:var(--ink); }
.bar-outer{
  width:100%; height:10px; background:var(--bar);
  border-radius:999px; overflow:hidden; border:1px solid var(--border);
}
.bar-inner{ height:100%; width:0; background:var(--bar-fill); }

/* Meal rows */
.meal-row{
  border-top:1px solid var(--border);
  padding:10px 0;
}
.meal-top{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
}
.meal-title{
  display:flex; flex-direction:column; align-items:flex-start;
  gap:4px; border:0; background:transparent; padding:0; cursor:pointer;
}
.title-line{ display:flex; align-items:center; gap:8px; font-weight:800; font-size:16px; }
.chev{
  width:10px; height:10px; border-right:2px solid var(--muted); border-bottom:2px solid var(--muted);
  transform:rotate(-45deg); transition:transform .18s ease;
}
.meal-row.open .chev{ transform:rotate(45deg); }
.meal-macros{ font-size:13px; color:var(--muted); font-variant-numeric:tabular-nums; }

/* Toggle (switch) */
.switch{ position:relative; display:inline-block; width:48px; height:28px; }
.switch input{ opacity:0; width:0; height:0; }
.slider{
  position:absolute; inset:0; background:#e5e7eb; border-radius:999px; transition:.2s;
  box-shadow: inset 0 0 0 1px var(--border);
}
.slider:before{
  content:""; position:absolute; height:22px; width:22px; left:3px; top:3px;
  background:white; border-radius:50%; transition:.2s; box-shadow:0 1px 3px rgba(0,0,0,.15);
}
.switch input:checked + .slider{ background:#d1f3e5; box-shadow: inset 0 0 0 1px #b7e7d2; }
.switch input:checked + .slider:before{ transform:translateX(20px); }

/* Ingredients list + inline editor */
.ingredients{ margin-top:10px; }
.ing-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:6px; }

.ing{
  border:1px solid var(--border);
  background:#fff;
  border-radius:12px;
  padding:10px;
}

.ing-line{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
}
.ing-food{ font-weight:700; }
.ing-qty{ color:var(--muted); font-variant-numeric:tabular-nums; }

.ing-edit-btn{
  border:1px solid var(--border); background:#fff; padding:6px 10px; border-radius:10px;
  font-weight:600; font-size:14px; cursor:pointer;
}
.ing-edit-btn:hover{ border-color:var(--accent); color:var(--accent-ink); }

.ing-editor{ display:none; padding-top:10px; }
.ing.edit-open .ing-editor{ display:block; }

.ing-editor-row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.ing-input{
  width:120px; padding:8px 10px; border:1px solid var(--border); border-radius:10px;
  font-variant-numeric:tabular-nums; background:#fff;
}
.ing-unit{
  padding:8px 10px; border:1px solid var(--border); border-radius:10px; background:#fff;
}
.ing-save, .ing-reset{
  padding:8px 12px; border-radius:10px; border:1px solid var(--border); background:#fff; font-weight:700;
}
.ing-save{ border-color:var(--accent); color:var(--accent-ink); }
.ing-reset{ color:#475569; }
.ing-note{ margin-top:6px; font-size:12px; color:var(--muted); }

/* Empty state */
.empty-state{ text-align:center; padding:24px; color:var(--muted); }
.empty-title{ font-weight:800; color:var(--ink); margin-bottom:6px; }

/* Snackbar */
#snackbar{
  position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
  background:#111827; color:#fff; padding:12px 16px; border-radius:10px; box-shadow:var(--shadow);
  display:flex; align-items:center; gap:10px; z-index:100;
}
#snackbar.hidden{ display:none; }
#undoBtn{
  background:#fff; color:#111827; border:0; padding:6px 10px; border-radius:8px; font-weight:700;
}

/* Views */
.hidden{ display:none !important; }
.page{ padding:14px; }

/* Hydration & Supps minor harmonization (if present) */
.hydro-row, .supps-row{ border-top:1px solid var(--border); padding:10px 0; }

/* Buttons general */
button{ font-family:inherit; color:inherit; }
button:focus-visible, .ing-input:focus-visible, .ing-unit:focus-visible{
  outline:2px solid var(--accent); outline-offset:2px;
}

/* Compact on very small screens */
@media (max-width:420px){
  .meal-macros{ font-size:12px; }
  .tab{ padding:10px 8px; font-size:14px; }
  .ing-input{ width:100px; }
  .switch{ width:46px; height:26px; }
  .slider:before{ height:20px; width:20px; }
}

/* Optional dark-mode support (inherits system setting) */
@media (prefers-color-scheme:dark){
  :root{
    --bg:#0b1020;
    --card:#0f172a;
    --ink:#e5e7eb;
    --muted:#9aa3b2;
    --border:#1f2940;
    --chip:#111a30;
    --bar:#15203a;
    --bar-fill:#38bdf8;
    --accent:#38bdf8;
    --accent-ink:#7dd3fc;
    --shadow: 0 6px 20px rgba(0,0,0,.35);
  }
  .tab{ background:#0f172a; }
  .ing, .card, .tab, .nav-inline button{ background:#0f172a; border-color:var(--border); }
  .slider{ background:#1f2940; box-shadow: inset 0 0 0 1px var(--border); }
  .switch input:checked + .slider{ background:#0b3b2c; box-shadow: inset 0 0 0 1px #14532d; }
  #snackbar{ background:#0b1020; color:#e5e7eb; }
  #undoBtn{ background:#e5e7eb; color:#111827; }
}