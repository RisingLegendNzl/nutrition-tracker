<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Nutrify</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <header class="app-header">
    <h1>Nutrify</h1>
    <nav class="tabs">
      <button id="tabDiet" class="tab active" aria-controls="dietPage">Diet</button>
      <button id="tabSupps" class="tab" aria-controls="suppsPage">Sup-Stack</button>
      <button id="tabHydro" class="tab" aria-controls="hydroPage">Hydration</button>
    </nav>
    <div id="daySwitcher" class="day-switcher">
      <button id="prevDay" class="ghost" aria-label="Previous day">Prev</button>
      <div id="dayName" class="day-name">Monday</div>
      <button id="nextDay" class="ghost" aria-label="Next day">Next</button>
    </div>
    <button id="openProfile" class="ghost small profile-btn" aria-label="Open profile">Profile</button>
  </header>

  <!-- DIET -->
  <main id="dietPage">
    <section class="card">
      <h2 class="section-title">Meals</h2>
      <div id="meals"></div>
    </section>

    <section class="card">
      <h2 class="section-title">Remaining Today</h2>
      <div id="macroSummary" class="summary-row"></div>
      <div id="bars"></div>
      <div style="margin-top:8px; display:flex; gap:8px; justify-content:flex-end; flex-wrap:wrap">
        <button id="resetDiet" class="ghost small">Reset day</button>
        <button id="resetWeek" class="ghost small">Reset week</button>
      </div>
    </section>
  </main>

  <!-- SUPPLEMENTS -->
  <main id="suppsPage" class="hidden">
    <section class="card">
      <h2 class="section-title">Supplements</h2>
      <div id="suppList"></div>
      <div class="supp-actions">
        <button id="restoreDefaults" class="ghost small">Restore defaults</button>
      </div>
    </section>

    <!-- Add/Edit Sheet -->
    <div id="sheet" class="sheet hidden" role="dialog" aria-modal="true" aria-labelledby="sheetTitle">
      <div class="sheet-card">
        <h3 id="sheetTitle">Add supplement</h3>
        <form id="suppForm">
          <label class="field">
            <span>Name</span>
            <input id="fName" type="text" placeholder="e.g., Zinc"/>
          </label>
          <label class="field">
            <span>Dosage</span>
            <input id="fDose" type="text" placeholder="e.g., 25 mg"/>
          </label>
          <label class="field">
            <span>Timing</span>
            <input id="fTiming" type="text" placeholder="e.g., With breakfast"/>
          </label>
          <label class="field">
            <span>Pairs best with</span>
            <input id="fPairs" type="text" placeholder="e.g., Fat-containing meal"/>
          </label>
          <label class="field">
            <span>Notes</span>
            <input id="fNotes" type="text" placeholder="Optional notes"/>
          </label>
          <div class="sheet-actions">
            <button type="button" id="cancelSheet" class="ghost">Cancel</button>
            <button type="submit" id="saveSheet" class="primary">Save</button>
          </div>
        </form>
      </div>
    </div>

    <button id="addSupp" class="fab" aria-label="Add supplement">Add</button>

    <div id="snackbar" class="snackbar hidden">
      <span id="snackMsg"></span>
      <button id="undoBtn" class="link">Undo</button>
    </div>
  </main>

  <!-- HYDRATION -->
  <main id="hydroPage" class="hidden">
    <section class="card">
      <h2 class="section-title">Hydration</h2>

      <div class="hydro-goal-row">
        <div class="hydro-goal">
          <div class="hydro-goal-label">Daily goal</div>
          <button id="editGoalBtn" class="ghost small">Edit</button>
        </div>
        <div class="hydro-goal-values">
          <div><strong id="goalLitres">3.0</strong> L (<span id="goalMl">3000</span> ml)</div>
          <label class="switch small">
            <input id="autoGoal" type="checkbox">
            <span class="slider"></span>
          </label>
          <span class="auto-hint">Auto-goal</span>
        </div>
      </div>

      <div class="bottle-wrap">
        <div class="bottle">
          <div class="bottle-fill" id="bottleFill">
            <svg class="liq" viewBox="0 0 300 300" preserveAspectRatio="none" aria-hidden="true">
              <path class="wave w1" d="M0,190 C45,170 90,210 135,190 C180,170 225,210 270,190 L300,190 L300,300 L0,300 Z"/>
              <path class="wave w2" d="M0,200 C60,180 120,220 180,200 C240,180 300,220 300,200 L300,300 L0,300 Z"/>
            </svg>
          </div>
          <div class="bottle-gloss"></div>
        </div>
        <div class="hydro-numbers">
          <div id="todayStr" class="today-str">Today: 0 L / 0 L</div>
          <div id="pctStr" class="pct-str">0%</div>
          <div class="hydro-quick">
            <button class="pill-btn" data-ml="250">+250</button>
            <button class="pill-btn" data-ml="500">+500</button>
            <button class="pill-btn" data-ml="750">+750</button>
            <button class="pill-btn" data-ml="1000">+1000</button>
            <input id="customMl" type="number" placeholder="Custom ml"/>
            <button id="addCustom" class="ghost small">Add</button>
            <button id="resetWater" class="ghost small">Reset today</button>
          </div>
        </div>
      </div>

      <h2 class="section-title">Last 7 days</h2>
      <div id="hydroHistory" class="hydro-history"></div>
    </section>
  </main>

  <!-- PROFILE (gate) -->
  <div id="profilePage" class="sheet hidden" role="dialog" aria-modal="true" aria-labelledby="profileTitle">
    <div class="sheet-card">
      <h3 id="profileTitle">Profile</h3>
      <form id="profileForm">
        <div class="grid">
          <label class="field">
            <span>Name (optional)</span>
            <input id="pfName" type="text" placeholder="e.g., Jack"/>
          </label>
          <label class="field">
            <span>Sex</span>
            <select id="pfSex">
              <option value="NA">Prefer not to say</option>
              <option value="M">Male</option>
              <option value="F">Female</option>
            </select>
          </label>
          <label class="field">
            <span>Date of birth</span>
            <input id="pfDob" type="date" />
          </label>
          <label class="field">
            <span>Age</span>
            <input id="pfAge" type="number" min="10" max="90" placeholder="e.g., 23"/>
          </label>
          <label class="field">
            <span>Height (cm)</span>
            <input id="pfHeight" type="number" min="120" max="220" placeholder="e.g., 188"/>
          </label>
          <label class="field">
            <span>Weight (kg)</span>
            <input id="pfWeight" type="number" step="0.1" min="30" max="200" placeholder="e.g., 71.0"/>
          </label>
          <label class="field">
            <span>Activity level</span>
            <select id="pfActivity">
              <option value="sedentary">Sedentary</option>
              <option value="light">Light</option>
              <option value="moderate" selected>Moderate</option>
              <option value="high">High</option>
              <option value="athlete">Athlete</option>
            </select>
          </label>
          <label class="field">
            <span>Goal</span>
            <select id="pfGoal">
              <option value="maintain">Maintain</option>
              <option value="recomp">Recomp</option>
              <option value="lean_bulk">Lean bulk</option>
              <option value="fat_loss">Fat loss</option>
            </select>
          </label>
        </div>

        <fieldset class="card" style="margin-top:12px">
          <legend class="section-title" style="font-size:14px">Targets (optional overrides)</legend>
          <div class="grid">
            <label class="field">
              <span>Calories (kcal)</span>
              <input id="pfCal" type="number" min="1200" max="6000" placeholder="auto"/>
            </label>
            <label class="field">
              <span>Protein (g)</span>
              <input id="pfPro" type="number" min="40" max="400" placeholder="auto"/>
            </label>
            <label class="field">
              <span>Fibre (g)</span>
              <input id="pfFib" type="number" min="10" max="60" placeholder="auto"/>
            </label>
            <label class="field">
              <span>Iron (mg)</span>
              <input id="pfFe" type="number" min="5" max="30" placeholder="auto"/>
            </label>
            <label class="field">
              <span>Zinc (mg)</span>
              <input id="pfZn" type="number" min="5" max="30" placeholder="auto"/>
            </label>
            <label class="field">
              <span>Water (L)</span>
              <input id="pfWaterL" type="number" step="0.1" min="1" max="6" placeholder="auto"/>
            </label>
          </div>
        </fieldset>

        <div class="sheet-actions">
          <button type="button" id="skipProfile" class="ghost">Skip for now</button>
          <button type="submit" id="saveProfile" class="primary">Save & continue</button>
        </div>
      </form>
    </div>
  </div>

  <footer class="app-footer">
    <div class="tip">Diet: toggle meals to update remaining nutrients. Sup-Stack: mark “taken today”. Hydration: log water and watch the fill rise.</div>
  </footer>

  <!-- Data (meals & suggestions) -->
  <script src="data.js"></script>
  <!-- App modules -->
  <script type="module" src="js/app.js"></script>
</body>
</html>